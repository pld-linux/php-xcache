Index: trunk/processor/main.m4
===================================================================
--- trunk/processor/main.m4 (revision 311)
+++ trunk/processor/main.m4 (revision 342)
@@ -8,5 +8,5 @@
 
 dnl {{{ basic
-define(`REDEF', `undefine(`$1') define(`$1', `$2')')
+define(`REDEF', `ifdef(`$1', `undefine(`$1')') define(`$1', `$2')')
 define(`MAKE_MACRONAME', `translit(`$1', ` ():
 ', `_____')')
--- xcache/config.m4~	2006-12-03 05:01:17.000000000 +0200
+++ xcache/config.m4	2007-06-12 14:40:53.638101277 +0300
@@ -74,9 +74,6 @@
   fi
   PHP_SUBST([AWK])
   AC_PATH_PROGS([M4], [m4])
-  if echo | "$M4" -E > /dev/null 2>&1 ; then
-    M4="$M4 -E"
-  fi
    dnl fix for solaris m4: size of the push-back and argument
   if echo | "$M4" -B 102400 > /dev/null 2>&1 ; then
     M4="$M4 -B 102400"
